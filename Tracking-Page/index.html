<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="CodeHim">
  <title>Exprex Logistic Tracking</title>

  <link rel="stylesheet" href="css/style.css">

  <link rel="stylesheet" href="css/demo.css">
  <link href="css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
  <script type="text/javascript">

    function generateNow() {
      const urlParams = new URLSearchParams(window.location.search);
      const USERID = urlParams.get('i');
      JsBarcode("#barcode", USERID, {
        width: isMobile ? 1 : 2
      });
    }
    const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);


  </script>


  <script type="module">

    // function generateNow() {
    //         JsBarcode("#barcode", '123456789023456', {
    //           width: isMobile? 1 : 2
    //         });
    //      }



    const url = window.location.search;
    const urldata = new URLSearchParams(url);
    const USERID = urldata.get("i");
    const theurl = urldata.get("url");



    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc, query, onSnapshot, collection, orderBy, updateDoc, addDoc, serverTimestamp, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";
    import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyC8DPOS5L_uRfvmF-ggSGgfNxFxYxjmAYs",
      authDomain: "exprexlogix.firebaseapp.com",
      projectId: "exprexlogix",
      storageBucket: "exprexlogix.appspot.com",
      messagingSenderId: "432902759167",
      appId: "1:432902759167:web:8dc19e37aee94c67c4a2ca"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);


    getDoc(doc(db, "tracking", USERID)).then(docSnap => {

      if (docSnap.exists()) {

        document.getElementById("dtt").innerHTML = docSnap.data().date;
        document.getElementById("stt").innerHTML = docSnap.data().activestatus;
        document.getElementById("flg1").src = docSnap.data().origin;
        document.getElementById("flg2").src = docSnap.data().destination;

        document.getElementById('frame').src = docSnap.data().mapurl;
        if (docSnap.data().showmap == "no") {
          const MM = document.getElementById('mapid')
          MM.classList.replace("inmap", "inmap2");
        }

        //  ORDER STATUS TIME

        document.getElementById('tim').innerHTML = docSnap.data().date
        document.getElementById('tim2').innerHTML = docSnap.data().date2
        document.getElementById('tim3').innerHTML = docSnap.data().date3
        document.getElementById('tim4').innerHTML = docSnap.data().date4
        document.getElementById('tim5').innerHTML = docSnap.data().date5
        document.getElementById('tim6').innerHTML = docSnap.data().date6

        //  SHIPPER DATA
        document.getElementById('tfname').innerHTML = docSnap.data().fullname
        document.getElementById('tfname2').innerHTML = docSnap.data().country
        document.getElementById('tfname3').innerHTML = docSnap.data().email
        document.getElementById('tfname4').innerHTML = docSnap.data().phone


        //  RECEIVER DATA
        document.getElementById('Rtfname').innerHTML = docSnap.data().fullname2
        document.getElementById('Rtfname2').innerHTML = docSnap.data().country2
        document.getElementById('Rtfname3').innerHTML = docSnap.data().city
        document.getElementById('Rtfname4').innerHTML = docSnap.data().address
        document.getElementById('Rtfname5').innerHTML = docSnap.data().postcode
        document.getElementById('Rtfname6').innerHTML = docSnap.data().email2
        document.getElementById('Rtfname7').innerHTML = docSnap.data().phone2

        //   SHIPMENT DETAILS
        document.getElementById('Shi').innerHTML = docSnap.data().country
        document.getElementById('Shi2').innerHTML = docSnap.data().country2
        document.getElementById('Shi3').innerHTML = docSnap.data().activestatus
        document.getElementById('Shi4').innerHTML = docSnap.data().carrier
        document.getElementById('Shi5').innerHTML = docSnap.data().method
        document.getElementById('Shi6').innerHTML = docSnap.data().RN
        document.getElementById('Shi8').innerHTML = docSnap.data().date
        document.getElementById('Shi9').innerHTML = docSnap.data().comment
        // document.getElementById('ffm').innerHTML = docSnap.data().comment

        //  ACTIVE BLINKER

        if (docSnap.data().activestatus === "Order Placed") {
          const ST1 = document.getElementById('ss1')
          ST1.classList.add("blinker", "status-current");
        }
        if (docSnap.data().activestatus === "Order Confirmed") {
          const ST1 = document.getElementById('ss2')
          ST1.classList.add("blinker", "status-current");
        }

        if (docSnap.data().activestatus === "Intransit") {
          const ST1 = document.getElementById('ss3')
          ST1.classList.add("blinker", "status-current");
        }

        if (docSnap.data().activestatus === "Near by Courier facility") {
          const ST1 = document.getElementById('ss4')
          ST1.classList.add("blinker", "status-current");
        }

        if (docSnap.data().activestatus === "Out for Delivery") {
          const ST1 = document.getElementById('ss5')
          ST1.classList.add("blinker", "status-current");
        }

        if (docSnap.data().activestatus === "Delivered") {
          const ST1 = document.getElementById('ss6')
          ST1.classList.add("blinker", "status-current");
        }

        //    ACTIVE ORDER

        if (docSnap.data().activestatus === "Order Placed") {
          const ST1 = document.getElementById('tt1')
          ST1.classList.replace("tracking-item-pending", "tracking-item");
        }

        if (docSnap.data().activestatus === "Order Confirmed") {
          const ST2 = document.getElementById('tt1')
          ST2.classList.replace("tracking-item-pending", "tracking-item");
          const ST3 = document.getElementById('tt2')
          ST3.classList.replace("tracking-item-pending", "tracking-item");
        }

        if (docSnap.data().activestatus === "Intransit") {
          const ST2 = document.getElementById('tt1')
          ST2.classList.replace("tracking-item-pending", "tracking-item");
          const ST3 = document.getElementById('tt2')
          ST3.classList.replace("tracking-item-pending", "tracking-item");
          const ST4 = document.getElementById('tt3')
          ST4.classList.replace("tracking-item-pending", "tracking-item");
        }

        if (docSnap.data().activestatus === "Near by Courier facility") {
          const ST2 = document.getElementById('tt1')
          ST2.classList.replace("tracking-item-pending", "tracking-item");
          const ST3 = document.getElementById('tt2')
          ST3.classList.replace("tracking-item-pending", "tracking-item");
          const ST4 = document.getElementById('tt3')
          ST4.classList.replace("tracking-item-pending", "tracking-item");
          const ST5 = document.getElementById('tt4')
          ST5.classList.replace("tracking-item-pending", "tracking-item");
        }

        if (docSnap.data().activestatus === "Out for Delivery") {
          const ST2 = document.getElementById('tt1')
          ST2.classList.replace("tracking-item-pending", "tracking-item");
          const ST3 = document.getElementById('tt2')
          ST3.classList.replace("tracking-item-pending", "tracking-item");
          const ST4 = document.getElementById('tt3')
          ST4.classList.replace("tracking-item-pending", "tracking-item");
          const ST5 = document.getElementById('tt4')
          ST5.classList.replace("tracking-item-pending", "tracking-item");
          const ST6 = document.getElementById('tt5')
          ST6.classList.replace("tracking-item-pending", "tracking-item");
        }

        if (docSnap.data().activestatus === "Delivered") {
          const ST1 = document.getElementById('tt6')
          ST1.classList.replace("tracking-item-pending", "tracking-item");
          const ST2 = document.getElementById('tt1')
          ST2.classList.replace("tracking-item-pending", "tracking-item");
          const ST3 = document.getElementById('tt2')
          ST3.classList.replace("tracking-item-pending", "tracking-item");
          const ST4 = document.getElementById('tt3')
          ST4.classList.replace("tracking-item-pending", "tracking-item");
          const ST5 = document.getElementById('tt4')
          ST5.classList.replace("tracking-item-pending", "tracking-item");
          const ST6 = document.getElementById('tt5')
          ST6.classList.replace("tracking-item-pending", "tracking-item");

        }
      }
    })


    const v = query(collection(db, "trackingitems", USERID, "trackingitems"), orderBy("Cdate", "desc"))
    const unsub = onSnapshot(v, (querySnapshot) => {

      querySnapshot.forEach((doc) => {
        const FI = `
                          <tr >
                              <td width="25%">${doc.data().packagename} </td>
                              <td width="25%">${doc.data().quantity} </td>
                              <td width="25%">${doc.data().weight} </td>
                              <td width="25%">${doc.data().description} </td>
                          
                          
                          </tr> `

        document.getElementById("llt").insertAdjacentHTML('beforeend', FI);
      });
    })




  </script>


</head>

<body onload="generateNow()">

  <!-- GOOGLE TRANSLATOR -->

  <div id="google_translate_element"></div>
  <script>
    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        { pageLanguage: 'en' },
        'google_translate_element'
      );
    }
  </script>
  <script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>


  <!-- ADD COMAPNY LOGOG AND NAME HERE -->

  <!-- <div class="topcontent22">
    <a href="../index.html">
      <img class="htop" src="./logo.png"/>
    </a>
   </div> -->


  <script type="text/javascript"
    src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>



  <div class="topcontent">
    <button id="printer" style="border: 0px; color: blue; padding: 2%; background-color: transparent;">Print
      page</button>
    <div>
      <svg id="barcode"></svg>
    </div>
    <div class="dtf">
      <h6 class="topfl">From: <img class="flgs" id="flg1" /></h6>
      <h6 class="topfl">To: <img class="flgs" id="flg2" /> </h6>

      <hr>
      <h6 class="ddtt" style="margin-top: 5%; ">Order Status:<br> <span id="stt"
          style="font-weight: bolder; font-family: 'Courier New', Courier, monospace;">Loading....</span></h6>
      <hr>
      <h6 class="ddtt" style="margin-top: 5%; ">Date:<br> <span id="dtt"
          style="font-weight: bolder; font-family: 'Courier New', Courier, monospace;">00/00/0000</span></h6>
      <hr>

    </div>

  </div>

  <style>
    @media screen and (max-width:992px) {
      .ddtt {
        width: 100%;
      }
    }

    .topfl {
      margin-top: 5%;
      width: 17%;
    }

    @media screen and (max-width:992px) {
      .topfl {
        width: 30%;

      }
    }


    .flgs {
      width: 35%;
    }

    .dtf {
      padding: 3%;
      display: flex;
      width: 60%;
      justify-content: space-around;
      background-color: rgba(55, 182, 27, 0.046);
      flex-wrap: wrap;
      border-radius: 5px;

    }

    @media screen and (max-width:992px) {
      .dtf {
        width: 100%;
        justify-content: start;
        background-color: transparent;

      }
    }

    .htop {
      width: 23%;
      text-align: start;
      margin-left: 5%;
      font-weight: bolder;
      font-family: 'Courier New', Courier, monospace;
    }

    @media screen and (max-width:992px) {
      .htop {
        width: 53%;

      }
    }


    .topcontent22 {
      display: flex;
      margin-top: 3%;
      width: 100%;
      text-align: start;


    }

    @media screen and (max-width:992px) {
      .topcontent22 {
        display: block;
        margin-top: 5%;

      }
    }

    .topcontent {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 1%;
      border: 1px solid black;
      padding: 1%;
      width: 100%;

    }

    @media screen and (max-width:992px) {
      .topcontent {
        display: block;
        margin-top: 5%;
      }
    }



    .cd__main {
      display: flex;
      justify-content: space-around;
      background-color: rgba(180, 177, 173, 0.027);

    }

    @media screen and (max-width:992px) {
      .cd__main {
        display: block;
      }
    }
  </style>

  <main class="cd__main" style="font-family: 'Courier New', Courier, monospace;">

    <div class="tracking-list" style="font-family: 'Courier New', Courier, monospace;">
      <div id="tt1" class="tracking-item-pending">
        <div id="ss1" class="tracking-icon status-intransit">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood3.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Order Placed<span id="tim">Loading...</span></div>
      </div>
      <div id="tt2" class="tracking-item-pending">
        <div id="ss2" class="tracking-icon status-intransit">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood2.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Order Confirmed<span id="tim2">Loading...</span></div>
      </div>
      <div id="tt3" class="tracking-item-pending">
        <div id="ss3" class="tracking-icon status-intransit">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood4.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Intransit<span id="tim3">Loading...</span></div>
      </div>

      <div id="tt4" class="tracking-item-pending">
        <div id="ss4" class="tracking-icon status-intransit">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood5.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Near by Courier facility<span id="tim4">Loading...</span></div>
      </div>
      <div id="tt5" class="tracking-item-pending">
        <div id="ss5" class="tracking-icon status-intransit ">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood6.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Out for Delivery<span id="tim5">Loading...</span></div>
      </div>
      <div id="tt6" class="tracking-item-pending">
        <div id="ss6" class="tracking-icon status-intransit">
          <svg class="svg-inline--fa fa-circle fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="circle"
            role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg="">
            <path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path>
          </svg>
        </div>
        <div class="tracking-date"><img src="images/ood7.svg" class="img-responsive" alt="order-placed"></div>
        <div class="tracking-content">Delivered<span id="tim6">Loading...</span></div>
      </div>
    </div>

    <style>
      .seco2 {
        /* background-color: aqua; */
        width: 50%;

      }

      @media screen and (max-width:992px) {
        .seco2 {
          width: 100%;
          margin-top: 3%;
        }
      }

      table,
      td {
        /* border: 1px solid rgb(2, 79, 2); */
        border-collapse: collapse;

      }

      td {
        padding: 5px;
        text-align: left;

      }

      th {
        padding: 5px;
        text-align: left;

        border-collapse: collapse;
        /* border: 1px solid rgb(2, 79, 2); */
      }

      .downtabe {
        width: 100%;
        margin-top: 3%;
      }
    </style>

    <div class="seco2">
      <h4
        style="font-family: 'Courier New', Courier, monospace; font-weight: bolder; background-color: rgb(38, 67, 38); padding: 1%; color: white;">
        Shipper information</h4>
      <table style="width:100%">
        <tr>
          <th>Fullname:</th>
          <td id="tfname">loading...</td>
        </tr>
        <tr>
          <th>Country:</th>
          <td id="tfname2">loading...</td>
        </tr>
        <tr>
          <th>Email:</th>
          <td id="tfname3">loading...</td>
        </tr>
        <tr>
          <th>Telephone:</th>
          <td id="tfname4">loading...</td>
        </tr>
      </table>

      <h4
        style="margin-top: 5%; font-family: 'Courier New', Courier, monospace; font-weight: bolder; background-color: rgb(38, 67, 38); padding: 1%; color: white;">
        Receiver information</h4>
      <table style="width:100%">
        <tr>
          <th>Fullname:</th>
          <td id="Rtfname">loading...</td>
        </tr>
        <tr>
          <th>Country:</th>
          <td id="Rtfname2">loading...</td>
        </tr>
        <tr>
          <th>City:</th>
          <td id="Rtfname3">loading...</td>
        </tr>
        <tr>
          <th>Address:</th>
          <td id="Rtfname4">loading...</td>
        </tr>
        <tr>
          <th>Postcode:</th>
          <td id="Rtfname5">loading...</td>
        </tr>
        <tr>
          <th>Email:</th>
          <td id="Rtfname6">loading...</td>
        </tr>
        <tr>
          <th>Telephone:</th>
          <td id="Rtfname7">loading...</td>
        </tr>
      </table>


    </div>

    <div class="downtabe">
      <h4
        style="font-family: 'Courier New', Courier, monospace; font-weight: bolder; background-color: rgb(38, 67, 38); padding: 1%; color: white;">
        Shipment Details</h4>
      <table style="width:100%">
        <tr>
          <th>Origin</th>
          <td id="Shi">loading...</td>
        </tr>
        <tr>
          <th>Destination</th>
          <td id="Shi2">loading...</td>
        </tr>
        <tr>
          <th>Status</th>
          <td id="Shi3">loading...</td>
        </tr>
        <tr>
          <th>Carrier</th>
          <td id="Shi4">loading...</td>
        </tr>
        <tr>
          <th>Transportation Method</th>
          <td id="Shi5">loading...</td>
        </tr>

        <tr>
          <th>Carrier Reference No</th>
          <td>PARCEL/NUM/<span id="Shi6"></spantd>
        </tr>

        <tr>
          <th>Product</th>
          <td id="Shi7">COMMODITY</td>
        </tr>

        <tr>
          <th> Date</th>
          <td id="Shi8">loading...</td>
        </tr>

        <tr>
          <th>Comment</th>
          <td style="background-color: rgb(38, 67, 38); color: white; font-weight: bolder;" id="Shi9">loading...</td>
        </tr>
      </table>

      <h4
        style="margin-top: 5%; font-family: 'Courier New', Courier, monospace; font-weight: bolder; background-color: rgb(38, 67, 38); padding: 1%; color: white;">
        Package Details</h4>

      <table style="width: 100%; font-family: 'Courier New', Courier, monospace;">

        <thead>
          <tr>
            <th>Package</th>
            <th>quantity</th>
            <th>Weight</th>
            <th>Description</th>
          </tr>
        </thead>

        <thead id="llt">
          <tr>
          </tr>
        </thead>

      </table>
    </div>
    <style>
      .inmap {
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }

      .inmap2 {
        display: none;
      }
    </style>
    <div id="mapid" class="inmap">
      <h4
        style="margin-top: 5%; font-family: 'Courier New', Courier, monospace; font-weight: bolder; background-color: rgb(38, 67, 38); padding: 1%; color: white; width: 100%;">
        Package Current Location On Map</h4>
      <iframe id="frame" width="100%" height="350" style='border: 0px' allowfullscreen="" loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
      </iframe>
    </div>
  </main>
  <footer class="cd__credit">Powered By: <a title="Free web design code &amp; scripts" href="../index.html"
      target="_blank">Exprex Logistic</a></footer>

  <script src="js/script.js" type="3252fceeaa7ab34003a7f52e-text/javascript"></script>

  <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-80520768-2"
    type="3252fceeaa7ab34003a7f52e-text/javascript"></script>
  <script type="3252fceeaa7ab34003a7f52e-text/javascript">

</script>
  <script src="js/rocket-loader.min.js" data-cf-settings="3252fceeaa7ab34003a7f52e-|49" defer=""></script>

  <script>
    const Printer = document.getElementById('printer');
    Printer.addEventListener('click', () => {
      print();

    })
  </script>

</body>

</html>